@page "/products_new"
@inject InventoryApp.InventoryAppService inventoryAppService

<div class="column-layout products_new-container">
    <div class="column-layout group">
        <div class="row-layout group_1">
            <h6 class="h6">
                Products
            </h6>
            <div class="row-layout group_2">
                <IgbButton class="button" products_new-scope>
                    <span class="material-icons">
                        add
                    </span>
                    <span>Add new product</span>
                    <IgbRipple></IgbRipple>
                </IgbButton>
                <IgbButton Variant="ButtonVariant.Outlined" class="button" products_new-scope>
                    <span class="material-icons">
                        import_export
                    </span>
                    <span>Import product</span>
                    <IgbRipple></IgbRipple>
                </IgbButton>
            </div>
        </div>
        <div class="row-layout filters-and-sorting">
            <div class="row-layout group_3">
                <span class="select">Select not yet available in Blazor</span>
                <span class="user-input">Combo not yet available in Blazor</span>
                <IgbInput Label="Search" Outlined="false" class="user-input" products_new-scope>
                    <span slot="prefix">
                        <span class="material-icons icon">
                            search
                        </span>
                    </span>
                </IgbInput>
            </div>
            <div class="row-layout group_4">
                <IgbButton Variant="ButtonVariant.Flat" @onclick="@(e => Dropdown?.Toggle(Button))" @ref="Button" class="button" products_new-scope>
                    <span>Sort by</span>
                    <span class="material-icons">
                        keyboard_arrow_down
                    </span>
                    <IgbRipple></IgbRipple>
                </IgbButton>
                <IgbDropdown @ref="Dropdown" class="dropdown" products_new-scope>
                    <IgbDropdownItem>
                        Date added
                    </IgbDropdownItem>
                    <IgbDropdownItem>
                        Alphabetical
                    </IgbDropdownItem>
                </IgbDropdown>
            </div>
        </div>
        <div class="row-layout products">
            @foreach (var item in inventoryAppProducts)
            {
                <IgbCard Outlined="true" class="card" products_new-scope>
                    <IgbCardMedia class="media-content" products_new-scope>
                        <img src="@item.ImageURL" class="image" />
                    </IgbCardMedia>
                    <IgbCardHeader>
                        <h3 slot="title">
                            @item.Product
                        </h3>
                        <h5 slot="subtitle">
                            @item.Department
                        </h5>
                    </IgbCardHeader>
                    <IgbCardContent class="body-content" products_new-scope>
                        <p class="typography__body-2 text">
                            Here you can add some description of the product in more details
                        </p>
                    </IgbCardContent>
                    <IgbCardActions class="actions-content" products_new-scope>
                        <IgbButton Variant="ButtonVariant.Outlined" class="button_1" products_new-scope>
                            Edit
                            <IgbRipple></IgbRipple>
                        </IgbButton>
                        <IgbIconButton Variant="IconButtonVariant.Flat" class="icon-button" products_new-scope>
                            <span class="material-icons">
                                remove_red_eye
                            </span>
                            <IgbRipple></IgbRipple>
                        </IgbIconButton>
                        <IgbIconButton Variant="IconButtonVariant.Flat" class="icon-button" products_new-scope>
                            <span class="material-icons">
                                delete
                            </span>
                            <IgbRipple></IgbRipple>
                        </IgbIconButton>
                    </IgbCardActions>
                </IgbCard>
            }
        </div>
    </div>
    <span class="add-new-product">Dialog not yet available in Blazor</span>
    <span class="add-new-product">Dialog not yet available in Blazor</span>
</div>

@code {
    private IgbButton? Button;
    private IgbDropdown? Dropdown;
    private InventoryApp.ProductsType[] inventoryAppProducts = Array.Empty<InventoryApp.ProductsType>();

    protected override async Task OnInitializedAsync()
    {
        inventoryAppProducts = await this.inventoryAppService.GetProducts() ?? inventoryAppProducts;
    }
}
